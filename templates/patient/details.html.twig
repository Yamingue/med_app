{% extends 'main.html.twig' %}

{% block title %}Hello PatientController!{% endblock %}

{% block body %}
<div class="row g-4 mb-4">
    <div class="col-sm-6 col-xl-3">
        <div class="card">
            <div class="card-body">
                <div class="d-flex align-items-start justify-content-between">
                    <div class="content-left">
                        <span>Total consultation</span>
                        <div class="d-flex align-items-end mt-2">
                            <h4 class="mb-0 me-2">21,459</h4>
                            {# <small class="text-success">(+29%)</small> #}
                        </div>
                        {#
                        <p class="mb-0">0-3jrs</p>
                        #}
                    </div>
                    <div class="avatar">
                        <span class="avatar-initial rounded bg-label-primary">
                            <i class='bx bx-capsule bx-sm'></i>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-sm-6 col-xl-3">
        <div class="card">
            <div class="card-body">
                <div class="d-flex align-items-start justify-content-between">
                    <div class="content-left">
                        <span>Consultation en cours</span>
                        <div class="d-flex align-items-end mt-2">
                            <h4 class="mb-0 me-2">19,860</h4>
                            {# <small class="text-danger">(-14%)</small> #}
                        </div>
                        {#
                        <p class="mb-0">Last week analytics</p>
                        #}
                    </div>
                    <div class="avatar">
                        <span class="avatar-initial rounded bg-label-success">
                            <i class='bx bx-capsule bx-sm'></i>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="card mb-2">
    <div class="card-header">
        <h5> Nouvelle Consultation</h5>
    </div>
    <div class="card-body">
        {{form_start(form)}}
        <div class="row">
            <div class="col">
                {{form_row(form.type)}}
            </div>
            <div class="col">
                {{form_row(form.prix)}}
            </div>
        </div>
        {{form_end(form)}}
      
    </div>
</div>
<div class="row row-cols-2 row-cols-md-3 g-3">
    {% for consultation in consultations %}
    <!-- Consultation Card 1 -->
    <div class="col">
        <div class="card">

            <div class="card-body">
                <div class="d-flex justify-content-between mb-2">
                    <a href="{{path('patient_print_consultation',{id:consultation.id})}}" class="btn btn-icon btn-sm btn-outline-primary">
                        <i class='tf-icons bx bxs-download'></i>
                    </a>
                    {% if consultation.terminer %}
                    <span class="text-success"><i class='bx bx-check-circle fs-3'></i></span>
                    {% else %}
                    <span class="text-warning"><i class='bx bx-time fs-3'></i></span>
                    {% endif %}
                </div>
                <h5 class="card-title">#{{consultation.id}}</h5>
                <p class="card-text">
                    <strong>Date:</strong> {{consultation.createAt|date("d-m-Y")}}<br>
                    <strong>Type :</strong> {{consultation.type}}<br>
                </p>
                <div class="d-flex justify-content-between">
                    <div style="display:flex ;flex-direction:column; align-items:center">
                        <strong>
                            Examens
                        </strong>
                        <div>{{consultation.examents|length}}</div>
                    </div>
                    <div style="display:flex ;flex-direction:column; align-items:center">
                        <strong>
                            Ordonnances
                        </strong>
                        <div>{{consultation.ordonances|length}}</div>
                    </div>
                </div>
                <div class="d-grid mt-2">
                    <a href="{{ path('consultation_details',{id:consultation.id}) }}" class="btn btn-primary">DÃ©tails</a>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}

    
</div>

{% endblock %}